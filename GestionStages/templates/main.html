{% load static %}



<!DOCTYPE html>
<html>
    
    <head>
       
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Home</title>
        <meta charset="utf-8"/>
        <meta name="description" content="">
        <link rel="stylesheet" type="text/css" href="{% static '/css/style.css/' %}">
        <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
        

    </head>
    <body>
        <div class="container">
            {% include 'menu.html' %} 
            {% block content%}
         

            {% endblock %}
        </div>
        <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>
        <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
        <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
        <script src="{% static '/js/chart.js' %}"></script>
        <script>
           
            
            
            // add hovered class in selected list item
            let list = document.querySelectorAll('.navigation li');
            function activeLink(){
                list.forEach((item) =>
                item.classList.remove('hovered'));
                this.classList.add('hovered');
            }
            list.forEach((item) => 
            item.addEventListener('mouseover',activeLink));

            /*shortcut calendar*/
            config ={
                dateFormat:"Y-m-d",
            }

            flatpickr("#exampleInputDatebirth", {})





        
        </script>

        <script>
            const ctx = document.getElementById('myChart').getContext('2d');
            const earning = document.getElementById('earning').getContext('2d');
            var myChart = new Chart(ctx, {
            type: 'polarArea',
            data: {
                labels: [{% for data in avg_company_stages %} {% for c in companies %} {% if c.id == data.company %}   "{{c.name}}" ,  {% endif %} {% endfor %} {% endfor %}],
                datasets: [{
                label: 'Répartition PFE/Entreprise',
                data: [{% for data in avg_company_stages %}{{data.nb}},{% endfor %}],
                backgroundColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(255, 199, 132, 1)',
                'rgba(54, 262, 235, 1)',
                'rgba(255, 306, 86, 1)',
                'rgba(255, 499, 132, 1)',
                'rgba(54, 962, 235, 1)',
                'rgba(255, 06, 86, 1)',
                'rgba(255, 9, 132, 1)',
                'rgba(54, 2, 235, 1)',
                'rgba(255, 26, 86, 1)',
                'rgba(255, 49, 132, 1)',
                'rgba(54, 132, 235, 1)',
                'rgba(255, 269, 86,1)',
                'rgba(255, 929, 132, 1)',
                'rgba(54, 152, 235,1)',
                'rgba(255, 706, 86, 1)',
                ],
                }]
            },
            options: {
                plugins: {
                    title: {
                        display: true,
                        text: 'Répartition PFE/Entreprise',
                        position : 'bottom'
                    },
                    legend: {
                        position : 'bottom'
                    }
                },
                scales: {
                    r: {
                        
                        ticks: {
                            stepSize: 1
                        }
                    }
                }
                
            }
            });
        
        
        
        var myChart = new Chart(earning, {
        type: 'bar',
        data: {
        labels: [{% for data in avg_company_stagiaires %} {% for c in companies %} {% if c.id == data.company %}   "{{c.name}}" ,  {% endif %} {% endfor %} {% endfor %}],
        datasets: [{
            label: 'Stagiaires',
            data: [{% for data in avg_company_stagiaires %}{{data.total}},{% endfor %}],
            backgroundColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192,1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)',
                'rgba(54, 962, 235, 1)',
                'rgba(255, 06, 86, 1)',
                'rgba(255, 9, 132, 1)',
                'rgba(54, 2, 235, 1)',
                'rgba(255, 26, 86, 1)',
                'rgba(255, 49, 132, 1)',
                'rgba(54, 132, 235, 1)',
                'rgba(255, 269, 86,1)',
                'rgba(255, 929, 132, 1)',
                'rgba(54, 152, 235,1)',
                'rgba(255, 706, 86, 1)',
            ],
        }]
        },
        options: {
            plugins: {
                title: {
                    display: true,
                    text: 'Classement Des Entreprises Sur Le Nombre Des Stagiaires Retenus',
                    position : 'bottom'
                },
                legend: {
                    position : 'bottom'
                }
            },
            scales: {
                y: {
                    
                    ticks: {
                        stepSize: 1
                    }
                }
            }
            
        }
        });
        </script>
    </body>
</html>